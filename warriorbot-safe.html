<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶Ö WarriorBot - AI Companion (SAFE)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .warrior-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 700px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #8B0000, #C41E3A);
            border-radius: 15px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.95;
            margin-bottom: 8px;
        }
        
        .header .ai-badge {
            font-size: 0.9em;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
        }
        
        .status {
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            color: #155724;
            font-weight: 600;
        }
        
        .quick-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .warrior-btn {
            padding: 15px 20px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }
        
        .warrior-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.4);
        }
        
        .input-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 5px;
            border: 2px solid #8B0000;
        }
        
        .chat-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            background: transparent;
            outline: none;
        }
        
        .send-btn {
            background: #8B0000;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .send-btn:hover {
            background: #A0522D;
            transform: scale(1.05);
        }
        
        .response-area {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            min-height: 250px;
            white-space: pre-wrap;
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            border-left: 5px solid #8B0000;
            overflow-wrap: break-word;
        }
        
        .typing {
            color: #666;
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .typing-animation {
            display: inline-flex;
            gap: 3px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #8B0000;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-10px); opacity: 1; }
        }
        
        .success-response {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="warrior-container">
        <div class="header">
            <h1>ü¶Ö WarriorBot</h1>
            <p>"From Pain comes Strength ‚Ä¢ Through Faith we Hope"</p>
            <div class="ai-badge">‚ú® Powered by Google Gemini AI</div>
        </div>
        
        <div class="status">
            ‚úÖ AI Connection Active ‚Ä¢ Safe Mode Enabled
        </div>
        
        <div class="quick-buttons">
            <button class="warrior-btn" onclick="askAI('Tell me something positive')">üí™ Something Positive</button>
            <button class="warrior-btn" onclick="askAI('What is a red blood cell?')">üíä About Blood Cells</button>
            <button class="warrior-btn" onclick="askAI('How to stay healthy?')">üåü Stay Healthy</button>
            <button class="warrior-btn" onclick="askAI('Tell me a good quote')">üíú Good Quote</button>
            <button class="warrior-btn" onclick="askAI('What is faith?')">üôè About Faith</button>
            <button class="warrior-btn" onclick="askAI('How do blood disorders work?')">üìö Blood Info</button>
        </div>
        
        <div class="input-container">
            <input type="text" id="user-input" class="chat-input" 
                   placeholder="Ask me anything (avoiding medical advice)..."
                   onkeypress="if(event.key==='Enter') sendMessage()">
            <button class="send-btn" onclick="sendMessage()">Send</button>
        </div>
        
        <div id="ai-response" class="response-area">
ü§ñ Hello! I'm WarriorBot, your AI companion. I'm now running in "Safe Mode" to avoid content filtering issues.

‚ú® **I can help with:**
‚Ä¢ Positive thoughts and motivation
‚Ä¢ General health information  
‚Ä¢ Educational content about blood and health
‚Ä¢ Faith and spiritual topics
‚Ä¢ General questions and conversation

I'll give you smart AI responses while avoiding content filters. Try the buttons above! ü¶Öüíú
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyAnXiZuOwuH22tmB-wJ126P8GGlcHXeIfg';
        const MODEL_NAME = 'gemini-2.5-flash-preview-05-20';
        
        async function askAI(message) {
            const responseArea = document.getElementById('ai-response');
            
            // Show typing indicator
            responseArea.innerHTML = `
                <div class="typing">
                    ü§ñ WarriorBot is thinking
                    <div class="typing-animation">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            try {
                // Ultra-safe, simple prompt that shouldn't trigger filters
                const safePrompt = `Please respond helpfully to: ${message}`;

                const requestBody = {
                    contents: [{
                        parts: [{
                            text: safePrompt
                        }]
                    }],
                    generationConfig: {
                        maxOutputTokens: 300,
                        temperature: 0.7,
                        topK: 40,
                        topP: 0.8
                    },
                    safetySettings: [
                        {
                            category: "HARM_CATEGORY_HARASSMENT",
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        },
                        {
                            category: "HARM_CATEGORY_HATE_SPEECH", 
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        },
                        {
                            category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        },
                        {
                            category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        }
                    ]
                };
                
                console.log('Making safe AI request...');
                console.log('Request:', JSON.stringify(requestBody, null, 2));
                
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(requestBody)
                    }
                );
                
                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('API Error:', response.status, errorText);
                    throw new Error(`API Error: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Full API Response:', data);
                
                // Detailed response analysis with logging
                if (!data.candidates) {
                    console.error('No candidates in response:', data);
                    throw new Error('No candidates in response');
                }
                
                if (data.candidates.length === 0) {
                    console.error('Empty candidates array:', data);
                    throw new Error('Empty candidates array');
                }
                
                const candidate = data.candidates[0];
                console.log('First candidate:', candidate);
                
                // Check finish reason
                if (candidate.finishReason) {
                    console.log('Finish reason:', candidate.finishReason);
                    
                    if (candidate.finishReason === 'SAFETY') {
                        console.warn('Response blocked by safety filters');
                        responseArea.innerHTML = `‚ö†Ô∏è My response was blocked by safety filters. Let me try a different approach:

${getSafeResponse(message)}`;
                        return;
                    }
                    
                    if (candidate.finishReason === 'RECITATION') {
                        console.warn('Response blocked for recitation');
                        responseArea.innerHTML = `‚ö†Ô∏è Response blocked for copyright reasons. Here's my own response:

${getSafeResponse(message)}`;
                        return;
                    }
                }
                
                // Check for content
                if (!candidate.content) {
                    console.error('No content in candidate:', candidate);
                    throw new Error('No content in candidate');
                }
                
                if (!candidate.content.parts || candidate.content.parts.length === 0) {
                    console.error('No parts in content:', candidate.content);
                    throw new Error('No parts in content');
                }
                
                const text = candidate.content.parts[0].text;
                if (!text || text.trim().length === 0) {
                    console.error('Empty text response:', candidate.content.parts[0]);
                    throw new Error('Empty response text');
                }
                
                console.log('‚úÖ Success! AI Response:', text);
                
                // Add WarriorBot personality to the response
                const warriorResponse = `ü¶Ö **WarriorBot says:**

${text.trim()}

üí™ Stay strong, warrior! üíú`;
                
                responseArea.innerHTML = warriorResponse;
                responseArea.className = 'response-area success-response';
                
            } catch (error) {
                console.error('WarriorBot Error:', error);
                
                // Enhanced fallback
                const fallbackResponse = getSafeResponse(message);
                responseArea.innerHTML = `ü§ñ I had a technical issue, but here's my response:

${fallbackResponse}

üí° **Note**: This was from my backup knowledge. The AI connection had an issue.`;
                
                responseArea.className = 'response-area';
            }
        }
        
        async function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            
            if (!message) {
                alert('üí≠ Please enter a message!');
                return;
            }
            
            await askAI(message);
            input.value = '';
            input.focus();
        }
        
        function getSafeResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('positive') || lowerMessage.includes('good')) {
                return `üåü Here's something positive for you:

Every challenge you face makes you stronger. You have incredible resilience, and your journey matters. Keep moving forward, one step at a time! 

"The strongest people are not those who show strength in front of us, but those who win battles we know nothing about." üí™`;
            }
            
            if (lowerMessage.includes('blood') || lowerMessage.includes('cell')) {
                return `ü©∏ **About Blood Cells:**

Red blood cells carry oxygen throughout your body. They're made in your bone marrow and live for about 120 days. They contain hemoglobin, which gives blood its red color and helps transport oxygen.

White blood cells help fight infections, and platelets help with clotting. It's amazing how our bodies work! üåü`;
            }
            
            if (lowerMessage.includes('health') || lowerMessage.includes('stay healthy')) {
                return `üíö **Staying Healthy:**

‚Ä¢ **Stay hydrated** - Drink plenty of water
‚Ä¢ **Get good sleep** - 7-9 hours per night
‚Ä¢ **Eat nutritious foods** - Fruits, vegetables, whole grains
‚Ä¢ **Exercise regularly** - Even walking helps
‚Ä¢ **Manage stress** - Take time to relax
‚Ä¢ **See your doctor** - Regular check-ups are important

Your health is precious - take care of yourself! üåü`;
            }
            
            if (lowerMessage.includes('quote') || lowerMessage.includes('wisdom')) {
                return `üí´ **Inspiring Quote:**

"You are braver than you believe, stronger than you seem, and more loved than you will ever know." - A.A. Milne

"Every great journey begins with a single step, and every victory starts with the decision to try."

"Your current situation is not your final destination." ‚ú®`;
            }
            
            if (lowerMessage.includes('faith') || lowerMessage.includes('spiritual')) {
                return `üôè **About Faith:**

Faith is the quiet confidence that things will work out, even when we can't see how. It's the light that guides us through dark times and the hope that keeps us moving forward.

Faith doesn't make things easy - it makes them possible. It's not about having all the answers, but trusting the journey.

"Faith is taking the first step even when you don't see the whole staircase." - Martin Luther King Jr. ‚ú®`;
            }
            
            return `ü¶Ö Hello there! I'm here to help and support you on your journey. 

Whether you need information, encouragement, or just someone to listen, I'm ready to assist. What's on your mind today?

Remember: You are stronger than you know, and you're never facing challenges alone! üíú`;
        }
        
        // Auto-focus input on load
        window.addEventListener('load', () => {
            document.getElementById('user-input').focus();
        });
    </script>
</body>
</html>