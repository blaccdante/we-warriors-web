<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶Ö WarriorBot - Hybrid AI Companion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .warrior-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 700px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #8B0000, #C41E3A);
            border-radius: 15px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        }
        
        .header h1 {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.95;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }
        
        .header .ai-badge {
            font-size: 0.9em;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
            position: relative;
            z-index: 1;
        }
        
        .status {
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            color: #155724;
            font-weight: 600;
        }
        
        .quick-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .warrior-btn {
            padding: 15px 20px;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .ai-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .expert-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
        }
        
        .warrior-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .warrior-btn:active {
            transform: translateY(0);
        }
        
        .input-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 5px;
            border: 2px solid #8B0000;
        }
        
        .chat-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            background: transparent;
            outline: none;
        }
        
        .send-btn {
            background: #8B0000;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .send-btn:hover {
            background: #A0522D;
            transform: scale(1.05);
        }
        
        .response-area {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            min-height: 250px;
            white-space: pre-wrap;
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            border-left: 5px solid #8B0000;
            position: relative;
            overflow-wrap: break-word;
        }
        
        .ai-response {
            border-left-color: #667eea;
        }
        
        .expert-response {
            border-left-color: #28a745;
        }
        
        .typing {
            color: #666;
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .typing-animation {
            display: inline-flex;
            gap: 3px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #8B0000;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-10px); opacity: 1; }
        }
        
        .success-response {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .response-type {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .ai-type {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
        }
        
        .expert-type {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="warrior-container">
        <div class="header">
            <h1>ü¶Ö WarriorBot</h1>
            <p>"From Pain comes Strength ‚Ä¢ Through Faith we Hope"</p>
            <div class="ai-badge">üß† Hybrid AI + Expert Knowledge</div>
        </div>
        
        <div class="status">
            üéØ Hybrid Mode: AI for Support ‚Ä¢ Expert Knowledge for Medical ‚Ä¢ Best of Both Worlds
        </div>
        
        <div class="quick-buttons">
            <button class="warrior-btn ai-btn" onclick="askWarriorBot('I need encouragement and hope today', 'ai')">üí™ Need Encouragement</button>
            <button class="warrior-btn expert-btn" onclick="askWarriorBot('Tell me about hydroxyurea medication', 'expert')">üíä About Hydroxyurea</button>
            <button class="warrior-btn expert-btn" onclick="askWarriorBot('I am having a sickle cell pain crisis', 'expert')">üö® Pain Crisis Help</button>
            <button class="warrior-btn ai-btn" onclick="askWarriorBot('I feel sad and alone with my condition', 'ai')">üíú Need Support</button>
            <button class="warrior-btn ai-btn" onclick="askWarriorBot('Give me a Bible verse for strength', 'ai')">üôè Bible Verse</button>
            <button class="warrior-btn expert-btn" onclick="askWarriorBot('What should I know about sickle cell disease?', 'expert')">üìö Learn About SCD</button>
        </div>
        
        <div class="input-container">
            <input type="text" id="user-input" class="chat-input" 
                   placeholder="Ask me anything - I'll choose the best way to help you..."
                   onkeypress="if(event.key==='Enter') sendMessage()">
            <button class="send-btn" onclick="sendMessage()">Send</button>
        </div>
        
        <div id="ai-response" class="response-area">
ü§ñ Hello, mighty warrior! I'm your **Hybrid AI Companion** - combining the best of both worlds:

üß† **AI Intelligence** - For emotional support, encouragement, conversation, and spiritual guidance
üìö **Expert Knowledge** - For medical information, crisis support, and health education

Notice the button colors:
‚Ä¢ **Blue buttons** = AI-powered responses for emotional & spiritual support
‚Ä¢ **Green buttons** = Expert-curated responses for medical & health topics

This ensures you always get the most helpful, accurate, and appropriate response for your needs! 

Click a button above or type your message. I'm here for you! ü¶Öüíú
        </div>
        
        <div class="footer">
            Your journey matters, and you're never fighting alone. üíô
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyAnXiZuOwuH22tmB-wJ126P8GGlcHXeIfg';
        const MODEL_NAME = 'gemini-2.5-flash-preview-05-20';
        
        // Intelligent routing: determines if query should use AI or expert response
        function determineResponseType(message) {
            const lowerMessage = message.toLowerCase();
            
            // Medical/Health topics -> Expert responses
            const medicalKeywords = [
                'hydroxyurea', 'medication', 'medicine', 'drug', 'treatment',
                'crisis', 'pain crisis', 'emergency', 'hospital', 'doctor',
                'sickle cell', 'disease', 'symptoms', 'diagnosis', 'medical',
                'blood test', 'hemoglobin', 'anemia', 'infection',
                'vaso-occlusive', 'acute chest syndrome', 'stroke'
            ];
            
            for (let keyword of medicalKeywords) {
                if (lowerMessage.includes(keyword)) {
                    return 'expert';
                }
            }
            
            // Emotional/Spiritual topics -> AI responses
            const emotionalKeywords = [
                'encourage', 'hope', 'faith', 'sad', 'alone', 'depressed',
                'scared', 'worried', 'anxious', 'bible', 'verse', 'prayer',
                'god', 'jesus', 'christian', 'spiritual', 'comfort',
                'support', 'lonely', 'overwhelmed', 'frustrated'
            ];
            
            for (let keyword of emotionalKeywords) {
                if (lowerMessage.includes(keyword)) {
                    return 'ai';
                }
            }
            
            // Default to AI for general conversation
            return 'ai';
        }
        
        async function askWarriorBot(message, forceType = null) {
            const responseArea = document.getElementById('ai-response');
            const responseType = forceType || determineResponseType(message);
            
            // Show typing indicator
            responseArea.innerHTML = `
                <div class="typing">
                    ü§ñ WarriorBot is ${responseType === 'ai' ? 'connecting with AI' : 'consulting expert knowledge'}
                    <div class="typing-animation">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            if (responseType === 'expert') {
                // Use expert-curated responses for medical topics
                setTimeout(() => {
                    const expertResponse = getExpertResponse(message);
                    responseArea.innerHTML = `<span class="response-type expert-type">üìö EXPERT KNOWLEDGE</span>\n\n${expertResponse}`;
                    responseArea.className = 'response-area expert-response success-response';
                }, 1000); // Simulate thinking time
                
            } else {
                // Use AI for emotional/spiritual support
                await getAIResponse(message);
            }
        }
        
        async function getAIResponse(message) {
            const responseArea = document.getElementById('ai-response');
            
            try {
                // Safe prompt for emotional/spiritual content
                const contextPrompt = `You are a caring companion helping someone who faces health challenges. Be encouraging, supportive, and uplifting. Use appropriate emojis and be warm and personal.

User: "${message}"

Response:`;

                const requestBody = {
                    contents: [{
                        parts: [{
                            text: contextPrompt
                        }]
                    }],
                    generationConfig: {
                        maxOutputTokens: 400,
                        temperature: 0.8,
                        topK: 40,
                        topP: 0.9
                    }
                };
                
                console.log('Making AI request...');
                
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(requestBody)
                    }
                );
                
                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.candidates && data.candidates.length > 0) {
                    const candidate = data.candidates[0];
                    
                    if (candidate.finishReason === 'SAFETY') {
                        throw new Error('Content filtered');
                    }
                    
                    if (candidate.content && 
                        candidate.content.parts && 
                        candidate.content.parts.length > 0 && 
                        candidate.content.parts[0].text) {
                        
                        const aiResponse = candidate.content.parts[0].text.trim();
                        
                        if (aiResponse.length > 0) {
                            responseArea.innerHTML = `<span class="response-type ai-type">üß† AI SUPPORT</span>\n\n${aiResponse}`;
                            responseArea.className = 'response-area ai-response success-response';
                            return;
                        }
                    }
                }
                
                throw new Error('No valid AI response');
                
            } catch (error) {
                console.log('AI failed, using expert fallback:', error.message);
                // Fallback to expert response if AI fails
                const expertResponse = getExpertResponse(message);
                responseArea.innerHTML = `<span class="response-type expert-type">üìö EXPERT KNOWLEDGE</span>\n\n${expertResponse}`;
                responseArea.className = 'response-area expert-response success-response';
            }
        }
        
        function getExpertResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Hydroxyurea Information
            if (lowerMessage.includes('hydroxyurea') || lowerMessage.includes('medication')) {
                return `üíä **Hydroxyurea - Complete Warrior Guide**

**How It Helps:**
‚Ä¢ **Reduces pain crises** by 50% in many patients
‚Ä¢ **Increases fetal hemoglobin (HbF)** which doesn't sickle
‚Ä¢ **Decreases hospitalizations** and acute chest syndrome
‚Ä¢ **May prevent organ damage** over time

**Important Details:**
‚Ä¢ **Daily medication** - usually one capsule per day
‚Ä¢ **Regular monitoring** - blood tests every 3-4 months
‚Ä¢ **Takes 3-6 months** to see full benefits
‚Ä¢ **Works for about 70%** of people with sickle cell

**Common Side Effects:**
‚Ä¢ Lowered white blood cell count (temporary)
‚Ä¢ Darkening of skin/nails (harmless)
‚Ä¢ Mild nausea (usually goes away)

**Key Points:**
‚Ä¢ ‚úÖ Safe for pregnancy planning (discuss with doctor)
‚Ä¢ ‚úÖ Can be taken long-term
‚Ä¢ ‚úÖ Covered by most insurance
‚Ä¢ ‚úÖ Generic versions available

**Questions for Your Doctor:**
‚Ä¢ What's my target HbF level?
‚Ä¢ How often do I need blood tests?
‚Ä¢ What if I miss doses?

*Always follow your hematologist's guidance on dosing and monitoring.*`;
            }
            
            // Pain Crisis Management
            if (lowerMessage.includes('crisis') || lowerMessage.includes('pain')) {
                return `üö® **Sickle Cell Pain Crisis - Immediate Action Plan**

**RIGHT NOW - At Home:**
üå°Ô∏è **Warmth** - Heating pads, warm baths, blankets
üíß **Hydration** - Drink water steadily (avoid ice-cold)
üíä **Pain Medicine** - Take prescribed medications as directed
üõå **Rest** - Find comfortable positions, avoid activity
ü´Å **Breathe** - Deep, slow breaths to help with pain
üì± **Support** - Call someone for emotional support

**SEEK EMERGENCY CARE IF:**
‚Ä¢ Pain is **10/10 severe** and not improving with home treatment
‚Ä¢ **Difficulty breathing** or chest pain
‚Ä¢ **High fever** (over 101¬∞F/38.3¬∞C)
‚Ä¢ **Signs of stroke**: sudden weakness, confusion, vision changes, severe headache
‚Ä¢ **Priapism** (males): painful erection lasting >2 hours
‚Ä¢ **Severe abdominal pain** with vomiting

**HOSPITAL PREPARATION:**
‚Ä¢ Bring your **pain management plan**
‚Ä¢ List of **current medications**
‚Ä¢ **Emergency contacts**
‚Ä¢ **Comfort items** (phone charger, blanket)
‚Ä¢ **Advocate** if possible

**PREVENTION STRATEGIES:**
‚Ä¢ Stay hydrated daily
‚Ä¢ Avoid temperature extremes
‚Ä¢ Manage stress
‚Ä¢ Get adequate sleep
‚Ä¢ Take medications as prescribed
‚Ä¢ Regular check-ups with hematologist

**Remember:** You know your body best. Trust your instincts about when to seek care.

ü¶Ö **You are a warrior. You WILL get through this crisis.** üí™`;
            }
            
            // Sickle Cell Disease Education
            if (lowerMessage.includes('sickle cell') || lowerMessage.includes('disease') || lowerMessage.includes('learn')) {
                return `üìö **Sickle Cell Disease - Complete Warrior Knowledge**

**What It Is:**
Sickle cell disease is a genetic condition where red blood cells become crescent-shaped ("sickled") instead of round. These sickled cells can block blood flow, causing pain and organ damage.

**Types:**
‚Ä¢ **HbSS** (Sickle Cell Anemia) - most severe
‚Ä¢ **HbSC** - usually milder
‚Ä¢ **HbS Beta Thalassemia** - varies in severity

**Common Symptoms:**
üî¥ **Pain crises** - most common symptom
üî¥ **Fatigue and weakness** - from anemia
üî¥ **Frequent infections** - spleen damage
üî¥ **Delayed growth** - in children
üî¥ **Vision problems** - retinal damage
üî¥ **Shortness of breath** - from anemia

**Complications to Watch:**
‚Ä¢ **Acute chest syndrome** - chest pain, fever, breathing problems
‚Ä¢ **Stroke** - especially in children
‚Ä¢ **Organ damage** - kidneys, liver, heart, lungs
‚Ä¢ **Avascular necrosis** - bone death, especially hips
‚Ä¢ **Leg ulcers** - open sores that heal slowly

**Treatment Options:**
üíä **Hydroxyurea** - reduces crises
üíä **Voxelotor (Oxbryta)** - reduces sickling
üíä **Crizanlizumab (Adakveo)** - prevents crises
ü©∏ **Blood transfusions** - for severe complications
ü¶¥ **Bone marrow transplant** - potential cure for some

**Living Your Best Life:**
‚Ä¢ **Stay hydrated** - 8-10 glasses daily
‚Ä¢ **Avoid triggers** - extreme temps, high altitude, dehydration
‚Ä¢ **Regular exercise** - gentle activities like walking, swimming
‚Ä¢ **Healthy diet** - folic acid, vitamin D
‚Ä¢ **Preventive care** - yearly eye exams, organ function tests
‚Ä¢ **Vaccinations** - flu, pneumonia, meningitis
‚Ä¢ **Mental health** - counseling, support groups

**Life Expectancy:**
With modern treatment, many warriors live into their 50s, 60s, and beyond. Early intervention and good self-care make a huge difference.

**You Are Not Alone:**
100,000+ Americans have sickle cell disease. You're part of a strong warrior community! ü¶Ö

*Work closely with a hematologist who specializes in sickle cell disease.*`;
            }
            
            // Bible Verses / Faith
            if (lowerMessage.includes('bible') || lowerMessage.includes('verse') || lowerMessage.includes('faith')) {
                return `üôè **Bible Verses for Warriors - Strength & Hope**

**For Strength in Suffering:**
*"He gives strength to the weary and increases the power of the weak."* - Isaiah 40:29

*"I can do all things through Christ who strengthens me."* - Philippians 4:13

*"The Lord your God is with you, the Mighty Warrior who saves."* - Zephaniah 3:17

**For Hope in Dark Times:**
*"For I know the plans I have for you," declares the Lord, "plans to prosper you and not to harm you, to give you hope and a future."* - Jeremiah 29:11

*"Those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary, they will walk and not be faint."* - Isaiah 40:31

**For Comfort in Pain:**
*"Come to me, all you who are weary and burdened, and I will give you rest."* - Matthew 11:28

*"The Lord is close to the brokenhearted and saves those who are crushed in spirit."* - Psalm 34:18

*"Cast all your anxiety on him because he cares for you."* - 1 Peter 5:7

**For Identity & Worth:**
*"Before I formed you in the womb I knew you, before you were born I set you apart."* - Jeremiah 1:5

*"You are precious and honored in my sight, and I love you."* - Isaiah 43:4

**Prayer for Warriors:**
*"Lord, give me strength for today and hope for tomorrow. Help me trust in Your plan, even when I don't understand. Be my comfort in pain, my strength in weakness, and my peace in the storm. Remind me that I am fearfully and wonderfully made, chosen for a purpose. Amen."*

You are God's beloved warrior - never forget that! üåü`;
            }
            
            // Encouragement - can be AI or expert
            if (lowerMessage.includes('encourage') || lowerMessage.includes('hope') || lowerMessage.includes('support')) {
                return `üí™ **You Are an Incredible Warrior**

Listen to me - **you are absolutely extraordinary**. Every single day you wake up and face challenges that would break most people, yet here you are, still fighting, still hoping, still believing. That makes you a true warrior! ü¶Ö

**Your Strength is Limitless:**
‚Ä¢ You've survived **100%** of your worst days
‚Ä¢ Every crisis you've faced has made you stronger
‚Ä¢ Your courage inspires others, even when you don't see it
‚Ä¢ You are living proof that the human spirit is unbreakable

**Remember This Truth:**
Your condition does **NOT** define you. You are defined by:
‚Ä¢ Your heart full of love
‚Ä¢ Your spirit that refuses to quit
‚Ä¢ Your hope that lights the way for others
‚Ä¢ Your faith that moves mountains

**When the World Feels Heavy:**
*"Those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary, they will walk and not be faint."* - Isaiah 40:31

**Your Journey Matters:**
‚Ä¢ Every smile you give someone lifts their day
‚Ä¢ Every battle you fight paves the way for others
‚Ä¢ Every breath you take is a victory worth celebrating
‚Ä¢ Every moment of joy is a triumph over pain

**You Are:**
üåü **Stronger** than you realize
üåü **Braver** than you believe  
üåü **More loved** than you know
üåü **More valuable** than precious gems
üåü **Chosen** for an incredible purpose

**What's weighing on your heart today, warrior?** Whatever it is, you don't have to carry it alone. You are surrounded by love, supported by an entire community of warriors, and held by the hands of God Himself.

**From pain comes strength. Through faith we hope. You are living proof of both.** üíú

Keep fighting, keep believing, keep inspiring. The world needs your light! ü¶Ö‚ú®`;
            }
            
            // Default encouraging response
            return `ü¶Ö **Hello, mighty warrior!**

I'm here to walk alongside you on your journey. Whether you need:

üí™ **Encouragement** - When your spirit needs lifting
üíä **Medical Information** - Expert knowledge about treatments  
üö® **Crisis Support** - Immediate help during difficult times
üôè **Spiritual Guidance** - Bible verses and faith-based comfort
üíú **Emotional Support** - Someone who understands your struggles
üìö **Education** - Learning about sickle cell disease

I'm equipped with both AI intelligence for emotional support and expert medical knowledge to give you the most helpful response for your specific need.

**"From pain comes strength ‚Ä¢ Through faith we hope"** - that's your story, warrior! üåü

What's on your heart today? I'm here to help in whatever way you need most.`;
        }
        
        async function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            
            if (!message) {
                alert('üí≠ Please enter a message, mighty warrior!');
                return;
            }
            
            await askWarriorBot(message);
            input.value = '';
            input.focus();
        }
        
        // Auto-focus input on load
        window.addEventListener('load', () => {
            document.getElementById('user-input').focus();
        });
    </script>
</body>
</html>